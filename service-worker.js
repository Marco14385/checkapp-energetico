const CACHE="checkapp-energetico-v13-1766950936";
const ASSETS=["./","./index.html","./manifest.json","./icon-192.png","./icon-512.png","./apple-touch-icon.png","./favicon.png"];
self.addEventListener("install",(e)=>{self.skipWaiting();e.waitUntil(caches.open(CACHE).then(c=>c.addAll(ASSETS)).catch(()=>{}));});
self.addEventListener("activate",(e)=>{e.waitUntil((async()=>{const keys=await caches.keys();await Promise.all(keys.map(k=>k!==CACHE?caches.delete(k):Promise.resolve()));await self.clients.claim();})());});
self.addEventListener("fetch",(e)=>{const r=e.request;if(r.method!=="GET")return; e.respondWith((async()=>{const isHtml=r.headers.get("accept")?.includes("text/html"); if(isHtml){try{const f=await fetch(r);(await caches.open(CACHE)).put(r,f.clone());return f;}catch{return (await caches.match(r))||(await caches.match("./index.html"));}} const c=await caches.match(r); if(c)return c; try{const f=await fetch(r);(await caches.open(CACHE)).put(r,f.clone());return f;}catch{return c;}})());});
